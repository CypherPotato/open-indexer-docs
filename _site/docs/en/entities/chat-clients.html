<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Chat Clients | Open Indexer </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="title" content="Chat Clients | Open Indexer ">


        <link rel="icon" href="../../../assets/img/favicon.ico">
        <link rel="stylesheet" href="../../../public/docfx.min.css">
        <link rel="stylesheet" href="../../../public/main.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
        <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Geist:wght@100..900&display=swap" rel="stylesheet">
        
        <link href="https://cdn.jsdelivr.net/npm/remixicon@4.6.0/fonts/remixicon.css" rel="stylesheet">

        <meta name="docfx:navrel" content="../../../toc.html">
        <meta name="docfx:tocrel" content="../toc.html">

        <meta name="docfx:rel" content="../../../">


        <meta name="docfx:docurl" content="https://github.com/CypherPotato/open-indexer-docs/blob/master/docs/en/entities/chat-clients.md/#L1">
        <meta name="loc:inThisArticle" content="In this article">
        <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
        <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
        <meta name="loc:tocFilter" content="Filter by title">
        <meta name="loc:nextArticle" content="Next">
        <meta name="loc:prevArticle" content="Previous">
        <meta name="loc:themeLight" content="Light">
        <meta name="loc:themeDark" content="Dark">
        <meta name="loc:themeAuto" content="Auto">
        <meta name="loc:changeTheme" content="Change theme">
        <meta name="loc:copy" content="Copy">
        <meta name="loc:downloadPdf" content="Download PDF">
        
        <script type="module" src="./../../../public/docfx.min.js"></script>
        <script>
            const theme = localStorage.getItem('theme') || 'auto';
            document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
        </script>
        
        <script src="https://unpkg.com/@cypherpotato/el/dist/el.min.js"></script>
                
        <script>            
            function switchLanguage(lang) {
                const docPart = window.location.pathname.match(/\/docs\/((en)\/)?(.*)/)[3];
                const newPath = lang + docPart;
                window.location.href = window.location.origin + newPath;
            }        
        </script>
        
    </head>
    
    
    <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
        <header class="bg-body border-bottom">
            <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
                <div class="container-xxl flex-nowrap">
                    <a class="navbar-brand" href="../../../index.html">
                        <img id="logo" class="svg" src="../../../assets/img/Icon.png" alt="Open Indexer">
                        Open Indexer
                    </a>
                    <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="bi bi-three-dots"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navpanel">
                        <div id="navbar">
                            <form class="search" role="search" id="search">
                                <i class="bi bi-search"></i>
                                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <main class="container-xxl">
            <div class="toc-offcanvas">
                <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <nav class="toc" id="toc"></nav>
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="actionbar">
                    <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
                        <i class="bi bi-list"></i>
                    </button>

                    <nav id="breadcrumb"></nav>

                    <div id="language-wrapper">
                        <a class="btn border-0 dropdown-toggle show" data-bs-toggle="dropdown" aria-expanded="true" title="Change theme">
                            <i class="bi bi-globe"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end language-dropdown">
                            <li>
                                <a class="dropdown-item" href="javascript:switchLanguage('/docs/')">
                                    <img src="/assets/flag/brazil.png">
                                    Português
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="javascript:switchLanguage('/docs/en/')">
                                    <img src="/assets/flag/usa.png">
                                    English
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <article data-uid="">
<h1 id="chat-clients">Chat Clients</h1>

<p>A chat client provides a user interface through an <a href="/docs/en/entities/ai-gateway">AI Gateway</a> that allows the user to converse with their assistant. A chat client is integrated with the AI gateway's inference and supports deep thinking, research, and text conversation. Multi-modal features, such as sending images and audio, are under development.</p>
<div class="NOTE">
<h5>Note</h5>
<p>The Open Indexer never stores the content of a chat between a client and the user. You can use JavaScript for this task, but it is your responsibility to use and store it.</p>
</div>
<p>You can customize the interface of your chat client with custom CSS and JavaScript, as well as choose the language of the chat features.</p>
<h2 id="creating-a-chat-client">Creating a Chat Client</h2>
<p>Create a new chat client.</p>
<div class="request-item get">
    <span>POST</span>
    <span>
        /api/v1/web-chat-client/
    </span>
</div>
<pre><code class="lang-json">{
    // Specifies the public name of your chat client
    &quot;name&quot;: &quot;My Assistant&quot;,
    
    // Specifies the ID of the AI gateway to be used by the chat
    &quot;aiGatewayId&quot;: &quot;01965b64-a8eb-716c-892d-880159a9f12d&quot;,

    &quot;clientParameters&quot;: {
        
        // Optional. Specifies the language code to be used in the chat for most elements, such as error messages, buttons, etc.
        //      Values: pt-BR, en
        &quot;languageCode&quot;: &quot;pt-BR&quot; | &quot;en&quot;,

        // Optional. Specifies a JavaScript code to execute in the chat.
        &quot;customScripts&quot;: null,

        // Optional. Specifies a CSS code to apply custom styles to the chat.
        &quot;customStyles&quot;: null,

        // Optional. Specifies the highlight color of the chat client elements.
        &quot;primaryColor&quot;: &quot;#eabe44&quot;,

        // Optional. Specifies the title of the chat page.
        &quot;pageTitle&quot;: &quot;Assistant&quot;,

        // Optional. Specifies the title when entering the chat for the first time.
        &quot;helloLabel&quot;: &quot;It's great to see you here.&quot;,

        // Optional. Specifies the subtitle when entering the chat for the first time.
        &quot;helloSubLabel&quot;: &quot;I'm your assistant.&quot;,

        // Optional. Specifies the placeholder of the message sending field.
        &quot;textAreaPlaceholder&quot;: &quot;Talk to the assistant&quot;,

        // Optional. Specifies an image/logo to display in the chat for the first time.
        &quot;logoImageUrl&quot;: null,

        // Optional. Enables debugging features.
        &quot;debug&quot;: true,
        
        // Optional. Specifies which origins should be allowed to embed the chat client in an iframe. If this field is empty, any origin will be accepted.
        &quot;allowedFrameOrigins&quot;: [&quot;https://my-domain.com.br&quot;],
        
        // Optional. Specifies conversation suggestion buttons when starting a new chat session. You can add as many buttons as you want, but it is recommended to have up to 3 buttons.
        &quot;suggestionButtons&quot;: [
            {
                // Title to be displayed on the button.
                &quot;label&quot;: &quot;How to buy a car?&quot;,
                // Prompt to be sent to the model.
                &quot;prompt&quot;: &quot;Where and how can I buy a car in your store?&quot;
            },
            ...
        ]
    },
    
    &quot;limitingParameters&quot;: {
        
        // Optional. Specifies how many messages the user can send per hour in the chat. This option is tracked by the userTag of the session.
        &quot;messagesPerHour&quot;: 30,
        
        // Optional. Specifies the maximum number of tokens that a user message can contain. This field is only valid when used with models integrated into the Open Indexer.
        &quot;userInputMaxTokens&quot;: 1024,
        
        // Optional. Specifies the limit of messages (for the user and AI) that a session can have.
        &quot;maxMessages&quot;: 300
    }
}
</code></pre>
<h4 id="response">Response</h4>
<pre><code class="lang-json">{
    &quot;message&quot;: null,
    &quot;data&quot;: {
        &quot;id&quot;: &quot;01965b65-e95e-7795-848c-ff0919ef1436&quot;
    }
}
</code></pre>
<h2 id="editing-a-chat-client">Editing a Chat Client</h2>
<p>The body of this request is exactly the same as creating a chat client.</p>
<div class="request-item get">
    <span>PUT</span>
    <span>
        /api/v1/web-chat-client/<span>{chat-client-id}</span>
    </span>
</div>
<h4 id="response-1">Response</h4>
<pre><code class="lang-json">{
    &quot;message&quot;: &quot;Web client updated successfully.&quot;,
    &quot;data&quot;: null
}
</code></pre>
<h2 id="listing-chat-clients">Listing Chat Clients</h2>
<p>Get a list of created chat clients.</p>
<div class="request-item get">
    <span>GET</span>
    <span>
        /api/v1/web-chat-client/
    </span>
</div>
<h4 id="response-2">Response</h4>
<pre><code class="lang-json">{
    &quot;message&quot;: null,
    &quot;data&quot;: [
        {
            &quot;id&quot;: &quot;01965b59-daf6-7809-94c8-2a65b7264dba&quot;,
            &quot;name&quot;: &quot;My Chat Client&quot;
        },
        ...
    ]
}
</code></pre>
<h2 id="viewing-a-specific-chat-client">Viewing a Specific Chat Client</h2>
<p>Get details of an existing chat client.</p>
<div class="request-item get">
    <span>GET</span>
    <span>
        /api/v1/web-chat-client/<span>{chat-client-id}</span>
    </span>
</div>
<h4 id="response-3">Response</h4>
<pre><code class="lang-json">{
    &quot;message&quot;: null,
    &quot;data&quot;: {
        &quot;name&quot;: &quot;My Chat Client&quot;,
        &quot;aiGateway&quot;: {
            &quot;id&quot;: &quot;01965b59-49ff-7753-8327-b3b6a6a871f2&quot;,
            &quot;name&quot;: &quot;gateway-t1&quot;,
            &quot;knowledgeCollection&quot;: {
                &quot;id&quot;: &quot;01965b54-7fbd-70cd-982b-604de002ac0a&quot;,
                &quot;name&quot;: &quot;Car Information&quot;
            }
        },
        &quot;limitingParameters&quot;: {
            &quot;messagesPerHour&quot;: 30,
            &quot;userInputMaxTokens&quot;: 1024,
            &quot;maxMessages&quot;: 500
        },
        &quot;clientParameters&quot;: {
            &quot;languageCode&quot;: &quot;pt-BR&quot;,
            &quot;customScripts&quot;: null,
            &quot;customStyles&quot;: null,
            &quot;primaryColor&quot;: &quot;#f011d2&quot;,
            &quot;pageTitle&quot;: &quot;Lyra&quot;,
            &quot;helloLabel&quot;: &quot;It's great to see you here.&quot;,
            &quot;helloSubLabel&quot;: &quot;I'm your assistant.&quot;,
            &quot;textAreaPlaceholder&quot;: &quot;Talk to the assistant&quot;,
            &quot;logoImageUrl&quot;: null,
            &quot;debug&quot;: true,
            &quot;allowedFrameOrigins&quot;: []
        }
    }
}
</code></pre>
<h2 id="creating-a-chat-session">Creating a Chat Session</h2>
<p>A chat session is where you create a conversation between your chat client and the user. You can call this endpoint providing additional context for the conversation, such as the user's name, location, etc.</p>
<p>A chat session expires after a certain time for security reasons of the generated access token. When you call this endpoint providing a <code>tag</code>, you can call the same endpoint multiple times and get the active chat session for the informed tag, or create a new chat if there is no ongoing session.</p>
<p>A chat session also restores all conversation messages from the same session after disconnection. The user can clear the conversation by clicking the clear conversation button in the top right corner of the chat client. This session uses the limits defined by the chat client, such as the maximum number of messages and tokens in the conversation.</p>
<p>A session is automatically renewed for another 3 days when receiving a message from the user.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>It is only possible to determine the number of tokens used in a message when using a <a href="/docs/en/models">model provided by the Open Indexer</a>. If you use an external model, the <code>limitingParameters.userInputMaxTokens</code> property will be ignored.</p>
</div>
<div class="request-item post">
    <span>POST</span>
    <span>
        /api/v1/web-chat-client/<span>{chat-client-id}</span>/sessions
    </span>
</div>
<pre><code class="lang-json">{
    // Optional. Additional context for the AI about the chat.
    &quot;extraContext&quot;: &quot;# Additional context\r\n\r\nYou are talking to Eduardo.&quot;,
    
    // Time in seconds for the chat to expire. The minimum is 10 minutes. The maximum is 30 days.
    &quot;expires&quot;: 3600,

    // Optional (recommended). An external ID to identify the session later and reuse it whenever you call the same endpoint. It can be the ID of the user in your database or a string that facilitates the identification of this chat later.
    &quot;tag&quot;: &quot;my-user-tag&quot;
}
</code></pre>
<h4 id="response-4">Response</h4>
<pre><code class="lang-json">{
    &quot;message&quot;: null,
    &quot;data&quot;: {
        // ID of the created chat session.
        &quot;sessionId&quot;: &quot;01966f0b-172d-7bbc-9393-4273b86667d2&quot;,

        // Public access key of the chat.
        &quot;accessKey&quot;: &quot;wky_gr5uepjsgrhuqcj3aaat1iagrsmozwr9gghusnnu6zjhrsyures5xoe&quot;,

        // Public URL to converse with the chat.
        &quot;talkUrl&quot;: &quot;https://preview-s01.proj.pw/www/web-chat-clients/wky_gr5uepjsgrhuqcj3aaat1iagrsmozwr9gghusnnu6zjhrsyures5xoe&quot;
    }
}
</code></pre>

</article>

                <div class="contribution d-print-none">
                    <a href="https://github.com/CypherPotato/open-indexer-docs/blob/master/docs/en/entities/chat-clients.md/#L1" class="edit-link">Edit this page</a>
                </div>

                <div class="next-article d-print-none border-top" id="nextArticle"></div>

            </div>

            <div class="affix">
                <nav id="affix"></nav>
            </div>
        </main>

        <div class="container-xxl search-results" id="search-results"></div>

        <footer class="border-top text-secondary">
            <div class="container-xxl">
                <div class="flex-fill">
                    <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
                </div>
            </div>
            <script>
                if (window.location.pathname.startsWith('/docs/')) {
                    document.getElementById('language-wrapper').style.display = 'block';
                }
                
                function splitText(text, words) {
                    if (!Array.isArray(words)) return [];
                    const escapedWords = words.map(word =>
                        word.replace(/([.*+?^${}()|[\]\\])/g, '\\$1').replace(/\s/g, '\\$&'));
                        
                    escapedWords.sort((a, b) => b.length - a.length || b.localeCompare(a, 'en-US', { sensitivity: 'base' }));
                    const pattern = new RegExp(`\\b(${escapedWords.join('|')})\\b`, 'gi');
                    const splitResult = text.split(pattern);
                    const cleanedResult = splitResult.filter(segment => segment !== '');
                    return cleanedResult;
                }
                
                function runPostHljsFunctions() {
                    if (!document.querySelector("pre>code")) {
                        return;
                    }
                    if (!document.querySelector(".hljs")) {
                        setTimeout(runPostHljsFunctions, 100);
                        return;
                    }
                    
                    function highlightMissingCodeTokens(pre) {
                        const tokenClasses = [
                            "HttpResponse", "HttpRequest", "File", "Task",
                            "Router", "Route", "StringContent", "StreamContent",
                            "JsonContent", "RegexRoute", "HtmlContent", "CancellationTokenSource",
                            "HttpContext", "Stream", "MultipartObject", "Thread", "Task", "Encoding",
                            "HttpKnownHeaderNames", "HttpMethod", "List", "JsonSerializer",
                            "LogStream", "HttpServer", "RotatingLogPolicy", "StringBuilder",
                            "Console", "HttpRequestEventSource", "HttpWebSocket", "X509Certificate2",
                            "AppDomain", "Path", "Directory", "HttpServerConfiguration", "ListeningHost",
                            "ByteArrayContent", "ForwardingResolver", "IPAddress", "IPEndPoint",
                            "HttpServerExecutionResult", "ArgumentNullException", "JsonSerializerOptions",
                            "DbContext"
                        ];
                        const tokenValues = [
                            "RouteMethod", "Guid", "RequestHandlerExecutionMode", "HttpStatusCode",
                            "HttpStatusInformation", "DateTime", "TimeSpan", "RouterMethod",
                            "ListeningPort"
                        ];
                        const tokenInterfaces = [
                            "IRequestHandler", "IEnumerable", "ICollection", "IList"
                        ];
                        
                        function runStyles(node) {
                            if (node.nodeType === 3) {
                                applyStyles(node);
                                
                            } else if (node.nodeType === 1) {
                                
                                const prohibitedClasses = ["hljs-comment", "hljs-string"];
                                
                                if (! prohibitedClasses.some(cls => node.classList.contains(cls))) {
                                    for(const child of node.childNodes) {
                                        runStyles(child);
                                    }
                                }
                            }
                        }
                        
                        function applyStyles(textNode) {
                            const text = textNode.textContent;
                            const fragment = [];
                            
                            for (const token of splitText(text, [...tokenClasses, ...tokenValues, ...tokenInterfaces])) {
                                if (tokenClasses.includes(token)) {
                                    fragment.push(el("span.hljs-meta", token));
                                    
                                } else if (tokenValues.includes(token)) {
                                    fragment.push(el("span.hljs-meta-value", token));
                                    
                                } else if (tokenInterfaces.includes(token)) {
                                    fragment.push(el("span.hljs-meta-interface", token));
                                    
                                } else {
                                    fragment.push(token);
                                }
                            }
                            
                            textNode.replaceWith(el.fragment(...fragment));
                        }
                        
                        const code = pre.querySelector("code");
                        if (code && (code.classList.contains("lang-csharp") || code.classList.contains("lang-cs"))) {
                            runStyles(code);
                        }
                    }
                    
                    function addLineNumbers(pre) {
                        const code = pre.querySelector("code");
                        if (!code) return;
                        
                        var lines = (code.textContent.match(/\n/g) || []).length;
                        
                        if (lines <= 1) {
                            return;
                        }
                        
                        const lineElements = [];
                        for (let i = 1; i <= lines; i++) {
                            lineElements.push(el("span.hljs-line-number", i + "\n"));
                        }
                        
                        code.prepend(el("div.line-numbers", ...lineElements));
                        code.classList.add("has-line-numbers");
                    }
                                        
                    document.querySelectorAll("pre").forEach(pre => {
                        highlightMissingCodeTokens(pre);
                        addLineNumbers(pre);
                    });
                }
                
                runPostHljsFunctions();
            </script>
        </footer>
    </body>
</html>