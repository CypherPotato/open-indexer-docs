<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Functions (structured responses) | AIVAX </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="title" content="Functions (structured responses) | AIVAX ">


        <link rel="icon" href="../../../assets/img/favicon.ico">
        <link rel="stylesheet" href="../../../public/docfx.min.css">
        <link rel="stylesheet" href="../../../public/main.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Geist:wght@100..900&display=swap" rel="stylesheet">
        
        <link href="https://cdn.jsdelivr.net/npm/remixicon@4.6.0/fonts/remixicon.css" rel="stylesheet">

        <meta name="docfx:navrel" content="../../../toc.html">
        <meta name="docfx:tocrel" content="../toc.html">

        <meta name="docfx:rel" content="../../../">


        <meta name="docfx:docurl" content="https://github.com/CypherPotato/open-indexer-docs/blob/master/docs/en/entities/functions.md/#L1">
        <meta name="loc:inThisArticle" content="In this article">
        <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
        <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
        <meta name="loc:tocFilter" content="Filter by title">
        <meta name="loc:nextArticle" content="Next">
        <meta name="loc:prevArticle" content="Previous">
        <meta name="loc:themeLight" content="Light">
        <meta name="loc:themeDark" content="Dark">
        <meta name="loc:themeAuto" content="Auto">
        <meta name="loc:changeTheme" content="Change theme">
        <meta name="loc:copy" content="Copy">
        <meta name="loc:downloadPdf" content="Download PDF">
        
        <script type="module" src="./../../../public/docfx.min.js"></script>
        <script>
            const theme = localStorage.getItem('theme') || 'auto';
            document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
        </script>
        
        <script src="https://unpkg.com/@cypherpotato/el/dist/el.min.js"></script>
                
        <script>            
            function switchLanguage(lang) {
                const docPart = window.location.pathname.match(/\/docs\/((en)\/)?(.*)/)[3];
                const newPath = lang + docPart;
                window.location.href = window.location.origin + newPath;
            }        
        </script>
        
    </head>
    
    
    <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
        <header class="bg-body border-bottom">
            <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
                <div class="container-xxl flex-nowrap">
                    <a class="navbar-brand" href="../../../index.html">
                        <img id="logo" class="svg" src="../../../assets/img/aivax.png" alt="AIVAX">
                        AIVAX
                    </a>
                    <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="bi bi-three-dots"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navpanel">
                        <div id="navbar">
                            <form class="search" role="search" id="search">
                                <i class="bi bi-search"></i>
                                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <main class="container-xxl">
            <div class="toc-offcanvas">
                <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <nav class="toc" id="toc"></nav>
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="actionbar">
                    <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
                        <i class="bi bi-list"></i>
                    </button>

                    <nav id="breadcrumb"></nav>

                    <div id="language-wrapper">
                        <a class="btn border-0 dropdown-toggle show" data-bs-toggle="dropdown" aria-expanded="true" title="Change theme">
                            <i class="bi bi-globe"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end language-dropdown">
                            <li>
                                <a class="dropdown-item" href="javascript:switchLanguage('/docs/')">
                                    <img src="/assets/flag/brazil.png">
                                    Portugu√™s
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="javascript:switchLanguage('/docs/en/')">
                                    <img src="/assets/flag/usa.png">
                                    English
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <article data-uid="">
<h1 id="functions-structured-responses">Functions (structured responses)</h1>

<p>Functions are an implementation of structured responses that works with <strong>any LLM</strong>, even those that do not natively support structured outputs. AIVAX analyzes the provided <code>responseSchema</code> and manually validates whether the model responded as expected. When the model fails, AIVAX automatically notifies the errors until it generates a valid JSON.</p>
<p>This process continues until the <code>maxAttempts</code> parameter is reached or a valid JSON is generated. AIVAX interprets JSONs in markdown blocks, preceded or followed by text, and automatically extracts the final response.</p>
<p>You can use JSON functions with models that have reasoning without breaking the reasoning phase to generate the JSON. Additionally, you can use <a href="/docs/en/builtin-tools">built‚Äëin tools</a> during generation, such as web search, document generation, and opening links.</p>
<blockquote>
<p><strong>Note:</strong> Functions (JSON) are different from <a href="/docs/en/serverless">Hosted Functions</a>, which are serverless JavaScript code executed on AIVAX infrastructure for agentic tasks.</p>
</blockquote>
<h2 id="how-it-works">How it works</h2>
<p>When calling a function, you define <strong>what the model should do</strong> via instructions and <strong>how it should respond</strong> via a JSON Schema.</p>
<p>AIVAX validates the model's response in real time. If the generated JSON is invalid or does not follow the schema, the model receives automatic feedback about the errors and tries again. This cycle continues until:</p>
<ul>
<li>A valid JSON is generated (success on the first try or after corrections)</li>
<li>The <code>maxAttempts</code> limit is reached</li>
</ul>
<p><strong>Billing:</strong> You are charged for each generation attempt. Smarter models usually get it right on the first try, while smaller models may need multiple attempts.</p>
<p><strong>Performance tip:</strong> Use caching on your application side for data that does not change frequently (weather, daily statistics, etc). AIVAX does not perform automatic caching.</p>
<p>See the <a href="https://inference.aivax.net/apidocs#ExecuteJSONFunction">API reference</a> to learn more about the functions/output schemas API.</p>
<h2 id="supported-json-schema">Supported JSON Schema</h2>
<p>AIVAX guides the model to generate a response according to the provided JSON Schema. When the model generates something invalid, it receives feedback about the errors and tries again until the output conforms to the specification.</p>
<h3 id="supported-types-and-validations">Supported types and validations</h3>
<ul>
<li><strong>string</strong>:
<ul>
<li><code>minLength</code>, <code>maxLength</code></li>
<li><code>pattern</code> (regex)</li>
<li><code>format</code>: <code>date-time</code>, <code>email</code>, <code>time</code>, <code>duration</code>, <code>uri</code>, <code>url</code>, <code>ipv4</code>, <code>ipv6</code>, <code>uuid</code>, <code>guid</code></li>
<li><code>enum</code></li>
</ul>
</li>
<li><strong>number</strong> and <strong>integer</strong>:
<ul>
<li><code>minimum</code>, <code>maximum</code></li>
<li><code>exclusiveMinimum</code>, <code>exclusiveMaximum</code></li>
<li><code>multipleOf</code></li>
</ul>
</li>
<li><strong>array</strong>:
<ul>
<li><code>items</code></li>
<li><code>uniqueItems</code></li>
<li><code>minItems</code>, <code>maxItems</code></li>
</ul>
</li>
<li><strong>object</strong>:
<ul>
<li><code>properties</code></li>
<li><code>required</code></li>
</ul>
</li>
<li><strong>bool</strong>, <strong>boolean</strong></li>
<li><strong>null</strong></li>
</ul>
<p><strong>Multiple types:</strong> You can specify multiple types in a field:</p>
<pre><code class="lang-json">{
    &quot;type&quot;: [&quot;string&quot;, &quot;number&quot;]
}
</code></pre>
<blockquote>
<p><strong>Note:</strong> <code>number</code> and <code>integer</code> are synonyms. The <code>integer</code> type does not guarantee that the value will be an integer.</p>
</blockquote>
<h2 id="builtin-tools">Built‚Äëin tools</h2>
<p>You can use <a href="/docs/en/builtin-tools">built‚Äëin tools</a> during JSON generation, allowing the model to:</p>
<ul>
<li>Search the internet for up‚Äëto‚Äëdate information</li>
<li>Execute code for complex calculations</li>
<li>Open and analyze URLs</li>
<li>Generate images</li>
<li>Fetch social media posts</li>
</ul>
<p>These tools are especially useful for functions that need real‚Äëtime data or additional processing before generating the structured response.</p>
<h2 id="examples">Examples</h2>
<p>Check out examples of AI functions for various everyday tasks:</p>
<h4 id="classify-good-or-bad-comments">Classify good or bad comments</h4>
<div class="request-item post">
    <span>POST</span>
    <span>
        /api/v1/functions/json
    </span>
</div>
<pre><code class="lang-json">{
    &quot;modelName&quot;: &quot;@google/gemini-2.0-flash&quot;,
    &quot;instructions&quot;: &quot;Classify the user's comment by providing a rating for their comment.&quot;,
    &quot;inputData&quot;: {
        &quot;inputText&quot;: &quot;The food is good, but the environment is very noisy and also a bit dirty.&quot;
    },
    &quot;responseSchema&quot;: {
        &quot;type&quot;: &quot;object&quot;,
        &quot;properties&quot;: {
            &quot;commentSummary&quot;: {
                &quot;type&quot;: &quot;string&quot;,
                &quot;description&quot;: &quot;Summary of what the user meant.&quot;
            },
            &quot;score&quot;: {
                &quot;type&quot;: &quot;integer&quot;,
                &quot;min&quot;: 1,
                &quot;max&quot;: 5,
                &quot;description&quot;: &quot;The rating extracted from the evaluation, where 1 is very bad and 5 is very good.&quot;
            }
        },
        &quot;required&quot;: [
            &quot;commentSummary&quot;,
            &quot;score&quot;
        ]
    }
}
</code></pre>
<pre><code class="lang-json">{
  &quot;result&quot;: {
    &quot;commentSummary&quot;: &quot;The food is good, but the environment is noisy and a bit dirty.&quot;,
    &quot;score&quot;: 3
  },
  &quot;attempt&quot;: 0,
  &quot;elapsedMilliseconds&quot;: 788,
  &quot;warnings&quot;: [],
  &quot;context&quot;: {
    &quot;generatedUsage&quot;: [
      {
        &quot;sku&quot;: &quot;inference.functions.json.in&quot;,
        &quot;amount&quot;: 0.0000083,
        &quot;unitPrice&quot;: 1e-7,
        &quot;quantity&quot;: 83,
        &quot;description&quot;: &quot;JSON function rendering (@google/gemini-2.0-flash)&quot;
      },
      {
        &quot;sku&quot;: &quot;inference.functions.json.out&quot;,
        &quot;amount&quot;: 0.0000128,
        &quot;unitPrice&quot;: 4e-7,
        &quot;quantity&quot;: 32,
        &quot;description&quot;: &quot;JSON function rendering (@google/gemini-2.0-flash)&quot;
      }
    ],
    &quot;runnedFunctions&quot;: []
  }
}
</code></pre>
<h4 id="evaluate-a-mathematical-expression">Evaluate a mathematical expression</h4>
<div class="request-item post">
    <span>POST</span>
    <span>
        /api/v1/functions/json
    </span>
</div>
<pre><code class="lang-json">{
    &quot;modelName&quot;: &quot;@qwen/qwen3-32b&quot;,
    &quot;instructions&quot;: &quot;Evaluate the given math problem and provide the result step-by-step.&quot;,
    &quot;inputData&quot;: {
        &quot;inputText&quot;: &quot;what is two plus two minus pi ?&quot;
    },
    &quot;responseSchema&quot;: {
        &quot;type&quot;: &quot;object&quot;,
        &quot;properties&quot;: {
            &quot;steps&quot;: {
                &quot;type&quot;: &quot;array&quot;,
                &quot;items&quot;: {
                    &quot;type&quot;: &quot;object&quot;,
                    &quot;properties&quot;: {
                        &quot;stepDescription&quot;: {
                            &quot;type&quot;: &quot;string&quot;,
                            &quot;description&quot;: &quot;Current math step description.&quot;
                        },
                        &quot;carry&quot;: {
                            &quot;type&quot;: &quot;number&quot;,
                            &quot;description&quot;: &quot;The current result.&quot;
                        }
                    },
                    &quot;required&quot;: [
                        &quot;stepDescription&quot;,
                        &quot;carry&quot;
                    ]
                },
                &quot;minItems&quot;: 1
            },
            &quot;finalResult&quot;: {
                &quot;type&quot;: &quot;number&quot;,
                &quot;description&quot;: &quot;The math operation final result.&quot;
            }
        },
        &quot;required&quot;: [
            &quot;steps&quot;,
            &quot;finalResult&quot;
        ]
    },
    &quot;tools&quot;: [
        &quot;Code&quot;
    ]
}
</code></pre>
<pre><code class="lang-json">{
  &quot;result&quot;: {
    &quot;steps&quot;: [
      {
        &quot;stepDescription&quot;: &quot;Add 2 and 2&quot;,
        &quot;carry&quot;: 4
      },
      {
        &quot;stepDescription&quot;: &quot;Subtract pi (œÄ) from the result&quot;,
        &quot;carry&quot;: 0.858407346410207
      }
    ],
    &quot;finalResult&quot;: 0.858407346410207
  },
  &quot;attempt&quot;: 0,
  &quot;elapsedMilliseconds&quot;: 5775,
  &quot;warnings&quot;: [],
  &quot;context&quot;: {
    &quot;generatedUsage&quot;: [
      {
        &quot;sku&quot;: &quot;inference.functions.json.in&quot;,
        &quot;amount&quot;: 0.00031001,
        &quot;unitPrice&quot;: 2.9e-7,
        &quot;quantity&quot;: 1069,
        &quot;description&quot;: &quot;JSON function rendering (@qwen/qwen3-32b)&quot;
      },
      {
        &quot;sku&quot;: &quot;inference.functions.json.out&quot;,
        &quot;amount&quot;: 0.00054162,
        &quot;unitPrice&quot;: 5.9e-7,
        &quot;quantity&quot;: 918,
        &quot;description&quot;: &quot;JSON function rendering (@qwen/qwen3-32b)&quot;
      }
    ],
    &quot;runnedFunctions&quot;: [
      {
        &quot;functionName&quot;: &quot;evaluate_code&quot;,
        &quot;success&quot;: true,
        &quot;context&quot;: {
          &quot;arguments&quot;: &quot;console.log(2 + 2 - Math.PI);&quot;,
          &quot;result&quot;: {
            &quot;evaluatedCode&quot;: &quot;console.log(2 + 2 - Math.PI);&quot;,
            &quot;result&quot;: &quot;0.8584073464102069\nScript evaluation result: undefined\n&quot;
          }
        }
      }
    ]
  }
}
</code></pre>
<h4 id="fetch-latest-news-and-weather-for-a-given-city">Fetch latest news and weather for a given city</h4>
<div class="request-item post">
    <span>POST</span>
    <span>
        /api/v1/functions/json
    </span>
</div>
<pre><code class="lang-json">{
    &quot;modelName&quot;: &quot;@openai/gpt-4o-mini&quot;,
    &quot;instructions&quot;: &quot;Search for the 5 latest news and weather data for the given city.&quot;,
    &quot;inputData&quot;: {
        &quot;city&quot;: &quot;Tokyo&quot;
    },
    &quot;responseSchema&quot;: {
        &quot;type&quot;: &quot;object&quot;,
        &quot;properties&quot;: {
            &quot;latestNews&quot;: {
                &quot;type&quot;: &quot;array&quot;,
                &quot;items&quot;: {
                    &quot;type&quot;: &quot;object&quot;,
                    &quot;properties&quot;: {
                        &quot;title&quot;: {
                            &quot;type&quot;: &quot;string&quot;
                        },
                        &quot;details&quot;: {
                            &quot;type&quot;: &quot;string&quot;
                        },
                        &quot;link&quot;: {
                            &quot;type&quot;: &quot;string&quot;,
                            &quot;format&quot;: &quot;uri&quot;
                        }
                    },
                    &quot;required&quot;: [
                        &quot;title&quot;,
                        &quot;details&quot;,
                        &quot;link&quot;
                    ],
                    &quot;additionalProperties&quot;: false
                }
            },
            &quot;weather&quot;: {
                &quot;type&quot;: &quot;object&quot;,
                &quot;properties&quot;: {
                    &quot;currentTemperature&quot;: {
                        &quot;type&quot;: &quot;number&quot;
                    },
                    &quot;currentWeather&quot;: {
                        &quot;type&quot;: &quot;string&quot;,
                        &quot;enum&quot;: [
                            &quot;sunny&quot;,
                            &quot;cloudy&quot;,
                            &quot;rain&quot;,
                            &quot;thunderstorm&quot;
                        ]
                    },
                    &quot;forecast&quot;: {
                        &quot;type&quot;: &quot;string&quot;,
                        &quot;enum&quot;: [
                            &quot;sunny&quot;,
                            &quot;cloudy&quot;,
                            &quot;rain&quot;,
                            &quot;thunderstorm&quot;
                        ]
                    }
                },
                &quot;required&quot;: [
                    &quot;currentTemperature&quot;,
                    &quot;currentWeather&quot;,
                    &quot;forecast&quot;
                ],
                &quot;additionalProperties&quot;: false
            },
            &quot;assistantSummary&quot;: {
                &quot;type&quot;: &quot;string&quot;
            }
        },
        &quot;required&quot;: [
            &quot;latestNews&quot;,
            &quot;weather&quot;,
            &quot;assistantSummary&quot;
        ],
        &quot;additionalProperties&quot;: false
    },
    &quot;tools&quot;: [
        &quot;XPostsSearch&quot;,
        &quot;WebSearch&quot;
    ]
}
</code></pre>
<pre><code class="lang-json">{
  &quot;result&quot;: {
    &quot;latestNews&quot;: [
      {
        &quot;title&quot;: &quot;Indian Ambassador to Japan Expands Cooperation&quot;,
        &quot;details&quot;: &quot;Indian Ambassador to Japan Sibi George expressed eagerness to expand cooperation between India and Japan in business, technology, and security.&quot;,
        &quot;link&quot;: &quot;https://japannews.yomiuri.co.jp/&quot;
      },
      {
        &quot;title&quot;: &quot;Emperor Emeritus Akihito Discharged from Hospital&quot;,
        &quot;details&quot;: &quot;Japan‚Äôs Emperor Emeritus Akihito was discharged from the University hospital.&quot;,
        &quot;link&quot;: &quot;https://www.japantimes.co.jp/&quot;
      },
      {
        &quot;title&quot;: &quot;Tokyo Stocks Climb Following Wall Street Gains&quot;,
        &quot;details&quot;: &quot;Tokyo stocks climbed in the morning following Wall Street gains.&quot;,
        &quot;link&quot;: &quot;https://www.independent.co.uk/topic/tokyo&quot;
      },
      {
        &quot;title&quot;: &quot;Tightening of Business Manager Visa Requirements&quot;,
        &quot;details&quot;: &quot;Tokyo is tightening requirements for popular business manager visas.&quot;,
        &quot;link&quot;: &quot;https://www.japantimes.co.jp/latest-news/&quot;
      },
      {
        &quot;title&quot;: &quot;ANA Plans Affordable Flying Taxi Service&quot;,
        &quot;details&quot;: &quot;ANA plans to launch an affordable flying taxi service in Japan by 2027.&quot;,
        &quot;link&quot;: &quot;https://www.japantimes.co.jp/&quot;
      }
    ],
    &quot;weather&quot;: {
      &quot;currentTemperature&quot;: 31,
      &quot;currentWeather&quot;: &quot;cloudy&quot;,
      &quot;forecast&quot;: &quot;rain&quot;
    },
    &quot;assistantSummary&quot;: &quot;The latest news from Tokyo includes diplomatic and economic updates, while the current weather is partly cloudy with a temperature of 31¬∞C.&quot;
  },
  &quot;attempt&quot;: 0,
  &quot;elapsedMilliseconds&quot;: 19772,
  &quot;warnings&quot;: [],
  &quot;context&quot;: {
    &quot;generatedUsage&quot;: [
      {
        &quot;sku&quot;: &quot;serviceusage.web_search&quot;,
        &quot;amount&quot;: 0.005,
        &quot;unitPrice&quot;: 0.005,
        &quot;quantity&quot;: 1,
        &quot;description&quot;: &quot;Web Search request&quot;
      },
      {
        &quot;sku&quot;: &quot;serviceusage.web_search&quot;,
        &quot;amount&quot;: 0.005,
        &quot;unitPrice&quot;: 0.005,
        &quot;quantity&quot;: 1,
        &quot;description&quot;: &quot;Web Search request&quot;
      },
      {
        &quot;sku&quot;: &quot;inference.functions.json.in&quot;,
        &quot;amount&quot;: 0.000453,
        &quot;unitPrice&quot;: 1.5e-7,
        &quot;quantity&quot;: 3020,
        &quot;description&quot;: &quot;JSON function rendering (@openai/gpt-4o-mini)&quot;
      },
      {
        &quot;sku&quot;: &quot;inference.functions.json.out&quot;,
        &quot;amount&quot;: 0.0002406,
        &quot;unitPrice&quot;: 6e-7,
        &quot;quantity&quot;: 401,
        &quot;description&quot;: &quot;JSON function rendering (@openai/gpt-4o-mini)&quot;
      }
    ],
    &quot;runnedFunctions&quot;: [
      {
        &quot;functionName&quot;: &quot;web_search&quot;,
        &quot;success&quot;: true,
        &quot;context&quot;: {
          &quot;arguments&quot;: {
            &quot;search_term&quot;: &quot;Tokyo weather&quot;
          },
          &quot;result&quot;: {
            &quot;results&quot;: [
              {
                &quot;title&quot;: &quot;Search results&quot;,
                &quot;url&quot;: &quot;&quot;
              }
            ]
          }
        }
      },
      {
        &quot;functionName&quot;: &quot;web_search&quot;,
        &quot;success&quot;: true,
        &quot;context&quot;: {
          &quot;arguments&quot;: {
            &quot;search_term&quot;: &quot;latest news in Tokyo&quot;
          },
          &quot;result&quot;: {
            &quot;results&quot;: [
              {
                &quot;title&quot;: &quot;Search results&quot;,
                &quot;url&quot;: &quot;&quot;
              }
            ]
          }
        }
      }
    ]
  }
}
</code></pre>
<h4 id="fetch-top-artists-by-musical-genre">Fetch top artists by musical genre</h4>
<div class="request-item post">
    <span>POST</span>
    <span>
        /api/v1/functions/json
    </span>
</div>
<pre><code class="lang-json">{
            &quot;modelName&quot;: &quot;@openai/gpt-4.1-mini&quot;,
            &quot;instructions&quot;: &quot;The function should search, using the latest X posts, music streaming platforms (like Spotify, Apple Music etc.) and identify the 10 most played artists in the genre provided by the user. Then, it should format an object containing an ordered list of 10 artists, including position (1‚Äì10), name and estimated number of streams.&quot;,
            &quot;inputData&quot;: {
                &quot;genre&quot;: &quot;dubstep&quot;
            },
            &quot;responseSchema&quot;: {
                &quot;type&quot;: &quot;object&quot;,
                &quot;properties&quot;: {
                    &quot;artists&quot;: {
                        &quot;type&quot;: &quot;array&quot;,
                        &quot;description&quot;: &quot;List of the 10 most played artists in the specified genre&quot;,
                        &quot;items&quot;: {
                            &quot;type&quot;: &quot;object&quot;,
                            &quot;properties&quot;: {
                                &quot;rank&quot;: {
                                    &quot;type&quot;: &quot;integer&quot;,
                                    &quot;description&quot;: &quot;Position in the Top 10&quot;,
                                    &quot;minimum&quot;: 1,
                                    &quot;maximum&quot;: 10
                                },
                                &quot;name&quot;: {
                                    &quot;type&quot;: &quot;string&quot;,
                                    &quot;description&quot;: &quot;Artist name&quot;
                                },
                                &quot;monthlyStreams&quot;: {
                                    &quot;type&quot;: &quot;string&quot;,
                                    &quot;description&quot;: &quot;Approximate number of monthly streams, formatted, e.g., \&quot;150M\&quot;&quot;
                                },
                                &quot;source&quot;: {
                                    &quot;type&quot;: &quot;string&quot;,
                                    &quot;description&quot;: &quot;Platform or data source&quot;
                                }
                            },
                            &quot;required&quot;: [
                                &quot;rank&quot;,
                                &quot;name&quot;,
                                &quot;monthlyStreams&quot;,
                                &quot;source&quot;
                            ],
                            &quot;additionalProperties&quot;: false
                        }
                    }
                },
                &quot;required&quot;: [
                    &quot;artists&quot;
                ],
                &quot;additionalProperties&quot;: false
            },
            &quot;maxAttempts&quot;: 4,
            &quot;temperature&quot;: 1,
            &quot;tools&quot;: [
                &quot;XPostsSearch&quot;,
                &quot;WebSearch&quot;
            ],
            &quot;toolsOptions&quot;: {}
        }
</code></pre>
<pre><code class="lang-json">{
  &quot;result&quot;: {
    &quot;artists&quot;: [
      {
        &quot;rank&quot;: 1,
        &quot;name&quot;: &quot;Skrillex&quot;,
        &quot;monthlyStreams&quot;: &quot;31M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 2,
        &quot;name&quot;: &quot;Virtual Riot&quot;,
        &quot;monthlyStreams&quot;: &quot;12M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 3,
        &quot;name&quot;: &quot;Excision&quot;,
        &quot;monthlyStreams&quot;: &quot;11M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 4,
        &quot;name&quot;: &quot;Zeds Dead&quot;,
        &quot;monthlyStreams&quot;: &quot;10M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 5,
        &quot;name&quot;: &quot;Flux Pavilion&quot;,
        &quot;monthlyStreams&quot;: &quot;9M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 6,
        &quot;name&quot;: &quot;Illenium&quot;,
        &quot;monthlyStreams&quot;: &quot;8.5M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 7,
        &quot;name&quot;: &quot;Rusko&quot;,
        &quot;monthlyStreams&quot;: &quot;7M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 8,
        &quot;name&quot;: &quot;Bassnectar&quot;,
        &quot;monthlyStreams&quot;: &quot;6M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 9,
        &quot;name&quot;: &quot;Seven Lions&quot;,
        &quot;monthlyStreams&quot;: &quot;5.5M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      },
      {
        &quot;rank&quot;: 10,
        &quot;name&quot;: &quot;Getter&quot;,
        &quot;monthlyStreams&quot;: &quot;5M&quot;,
        &quot;source&quot;: &quot;Spotify&quot;
      }
    ]
  },
  &quot;attempt&quot;: 0,
  &quot;elapsedMilliseconds&quot;: 11243,
  &quot;warnings&quot;: [],
  &quot;context&quot;: {
    &quot;generatedUsage&quot;: [
      {
        &quot;sku&quot;: &quot;serviceusage.x_api.search&quot;,
        &quot;amount&quot;: 0.005,
        &quot;unitPrice&quot;: 0.005,
        &quot;quantity&quot;: 1,
        &quot;description&quot;: &quot;X Posts search&quot;
      },
      {
        &quot;sku&quot;: &quot;inference.functions.json.in&quot;,
        &quot;amount&quot;: 0.0016448,
        &quot;unitPrice&quot;: 4e-7,
        &quot;quantity&quot;: 4112,
        &quot;description&quot;: &quot;JSON function rendering (@openai/gpt-4.1-mini)&quot;
      },
      {
        &quot;sku&quot;: &quot;inference.functions.json.out&quot;,
        &quot;amount&quot;: 0.0006272,
        &quot;unitPrice&quot;: 0.0000016,
        &quot;quantity&quot;: 392,
        &quot;description&quot;: &quot;JSON function rendering (@openai/gpt-4.1-mini)&quot;
      }
    ],
    &quot;runnedFunctions&quot;: [
      {
        &quot;functionName&quot;: &quot;x_posts_search&quot;,
        &quot;success&quot;: true,
        &quot;context&quot;: {
          &quot;arguments&quot;: {
            &quot;search_query&quot;: &quot;dubstep artists Spotify OR Apple Music OR streaming&quot;
          },
          &quot;result&quot;: [
            {
              &quot;url&quot;: &quot;https://x.com/nathanielblow/status/1867148757466304607&quot;,
              &quot;text&quot;: &quot;NOW LIVE ON APPLE MUSIC. SPOTIFY. YOUTUBE MUSIC.\n\nEnjoy. https://t.co/apUxnXc7IE&quot;,
              &quot;authorUserName&quot;: &quot;nathanielblow&quot;,
              &quot;createdAt&quot;: &quot;2024-12-12T10:05:28&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/yobrxxzy/status/1754800896041505222&quot;,
              &quot;text&quot;: &quot;MOST STREAMED ARTISTS ON THESE STREAMING PLATFORMS üá≥üá¨\n\nApple Music ‚Äî WIZKID\nSpotify ‚Äî WIZKID\nYouTube ‚Äî BURNA BOY\nPandora ‚Äî WIZKID\nTidal  ‚Äî WIZKID\nLine Music ‚Äî WIZKID\nAudiomack ‚Äî ASAKE\nDeezer ‚Äî WIZKID\nBoomplay ‚Äî BURNA BOY\nSoundCloud ‚Äî BURNA BOY\nShazam ‚Äî WIZKID https://t.co/Nm2jO5R5P6&quot;,
              &quot;authorUserName&quot;: &quot;yobrxxzy&quot;,
              &quot;createdAt&quot;: &quot;2024-02-06T09:35:10&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/yobrxxzy/status/1922763266549301642&quot;,
              &quot;text&quot;: &quot;MOST STREAMED ARTISTS ON THESE DSP:\n\nApple Music ‚Äî WIZKID\nSpotify ‚Äî WIZKID\nPandora ‚Äî WIZKID\nYouTube ‚Äî BURNA BOY\nTidal  ‚Äî WIZKID\nLine Music ‚Äî WIZKID\nAudiomack ‚Äî ASAKE\nDeezer ‚Äî WIZKID\nBoomplay ‚Äî BURNA BOY\nDeezer ‚Äî WIZKID\nAnghami ‚Äî REMA\nSoundCloud ‚Äî BURNA BOY\nShazam ‚Äî WIZKID\n\nüêê https://t.co/3aUCGbYiEO&quot;,
              &quot;authorUserName&quot;: &quot;yobrxxzy&quot;,
              &quot;createdAt&quot;: &quot;2025-05-14T21:17:40&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/yobrxxzy/status/1856816512524587343&quot;,
              &quot;text&quot;: &quot;MOST STREAMED ARTISTS ON THESE DSP:\n\nApple Music ‚Äî WIZKID\nSpotify ‚Äî WIZKID\nYouTube ‚Äî BURNA BOY\nPandora ‚Äî WIZKID\nTidal  ‚Äî WIZKID\nLine Music ‚Äî WIZKID\nAudiomack ‚Äî ASAKE\nDeezer ‚Äî WIZKID\nBoomplay ‚Äî BURNA BOY\nDeezer ‚Äî WIZKID\nAnghami ‚Äî REMA\nSoundCloud ‚Äî BURNA BOY\nShazam ‚Äî WIZKID\n\nüêê https://t.co/yL2tmJJpHM&quot;,
              &quot;authorUserName&quot;: &quot;yobrxxzy&quot;,
              &quot;createdAt&quot;: &quot;2024-11-13T21:48:49&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/hourjinnie/status/1858756269902881208&quot;,
              &quot;text&quot;: &quot;PLAYLISTS! Let‚Äôs get to streaming and utilize all our tools! More pl coming tomorrow!!!\n\nSPOTIFY\n\nhttps://t.co/L0HRMpYEQG\n\nhttps://t.co/HmhdB859e5\n\nhttps://t.co/FA4eDmvvkS\n\nhttps://t.co/ZOedbxiKmO\n\nhttps://t.co/DyPs0qpOMQ\n\nDeezer\n\nhttps://t.co/36PY8aXkV7\n\nApple Music \n\nhttps://t.co/wk5MXtzDYC\n\nhttps://t.co/OgovuVtoDq\n\nPandora \n\nhttps://t.co/idkimHTTjp\n\nhttps://t.co/WQ83YKeUOK&quot;,
              &quot;authorUserName&quot;: &quot;hourjinnie&quot;,
              &quot;createdAt&quot;: &quot;2024-11-19T06:16:43&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/yobrxxzy/status/1653723618944090112&quot;,
              &quot;text&quot;: &quot;MOST STREAMED ARTISTS ON THESE STREAMING PLATFORMS:\n\nApple Music ‚Äî WIZKID\nSpotify ‚Äî WIZKID\nYouTube ‚Äî BURNA BOY\nPandora ‚Äî WIZKID\nTidal  ‚Äî WIZKID\nAudiomack ‚Äî BURNA BOY\nDeezer ‚Äî WIZKID\nBoomplay ‚Äî BURNA BOY\nSoundCloud ‚Äî WIZKID\nShazam ‚Äî WIZKID\n\nWhere is @davido ? https://t.co/JOcwJZ2HUU&quot;,
              &quot;authorUserName&quot;: &quot;yobrxxzy&quot;,
              &quot;createdAt&quot;: &quot;2023-05-03T11:30:10&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/EyelanderMusic/status/1882525103482872115&quot;,
              &quot;text&quot;: &quot;YO IF YOU THINK DUBSTEP IS GETTING ‚ÄúSTALE‚Äù \n\nGET THE HELL OFF OF SPOTIFY AND ON TO SOUNDCLOUD \n\nTHERE IS SOOO MUCH INSANE UNDERGROUND TALENT THAT RELEASE MOSTLY JUST TO SOUNDCLOUD. \n\n(Plus that‚Äôs usually where all showcases, remixes and flips are for copyright purposes)&quot;,
              &quot;authorUserName&quot;: &quot;EyelanderMusic&quot;,
              &quot;createdAt&quot;: &quot;2025-01-23T20:25:34&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/thisiscyclops/status/1815084003050791422&quot;,
              &quot;text&quot;: &quot;i like that more dubstep artists are doing albums this year. like i know it‚Äôs not the best release move in 2024 but that kinda lets you know that they‚Äôre doing it out of love for the music rather than like the Best Spotify Strategy üëç&quot;,
              &quot;authorUserName&quot;: &quot;thisiscyclops&quot;,
              &quot;createdAt&quot;: &quot;2024-07-21T17:58:43&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/mewaolix/status/1886435921895235989&quot;,
              &quot;text&quot;: &quot;Stays, we can easily reach #3 if we push a little ü•π\n\n(DSP counts Spotify, Apple Music, Amazon Music, Deezer, YT Music, Anghami, Gaana, Joox, Melon, JioSaavn, Boomplay, etc) https://t.co/P2hFoSmbtT&quot;,
              &quot;authorUserName&quot;: &quot;mewaolix&quot;,
              &quot;createdAt&quot;: &quot;2025-02-03T15:25:46&quot;
            },
            {
              &quot;url&quot;: &quot;https://x.com/bhadext/status/1951588819561546145&quot;,
              &quot;text&quot;: &quot;Listen to my songs on Apple music, üôè\nBhadext \n\nHere: https://t.co/3u79BQvHAZ https://t.co/lmMjN7m2oR&quot;,
              &quot;authorUserName&quot;: &quot;bhadext&quot;,
              &quot;createdAt&quot;: &quot;2025-08-02T10:20:08&quot;
            },
            {
</code></pre>

</article>

                <div class="contribution d-print-none">
                    <a href="https://github.com/CypherPotato/open-indexer-docs/blob/master/docs/en/entities/functions.md/#L1" class="edit-link">Edit this page</a>
                </div>

                <div class="next-article d-print-none border-top" id="nextArticle"></div>

            </div>

            <div class="affix">
                <nav id="affix"></nav>
            </div>
        </main>

        <div class="container-xxl search-results" id="search-results"></div>

        <footer class="border-top text-secondary">
            <div class="container-xxl">
                <div class="flex-fill">
                    <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
                </div>
            </div>
            <script>
                if (window.location.pathname.startsWith('/docs/')) {
                    document.getElementById('language-wrapper').style.display = 'block';
                }
                
                function splitText(text, words) {
                    if (!Array.isArray(words)) return [];
                    const escapedWords = words.map(word =>
                        word.replace(/([.*+?^${}()|[\]\\])/g, '\\$1').replace(/\s/g, '\\$&'));
                        
                    escapedWords.sort((a, b) => b.length - a.length || b.localeCompare(a, 'en-US', { sensitivity: 'base' }));
                    const pattern = new RegExp(`\\b(${escapedWords.join('|')})\\b`, 'gi');
                    const splitResult = text.split(pattern);
                    const cleanedResult = splitResult.filter(segment => segment !== '');
                    return cleanedResult;
                }
                
                function runPostHljsFunctions() {
                    if (!document.querySelector("pre>code")) {
                        return;
                    }
                    if (!document.querySelector(".hljs")) {
                        setTimeout(runPostHljsFunctions, 100);
                        return;
                    }
                    
                    function highlightMissingCodeTokens(pre) {
                        const tokenClasses = [
                            "HttpResponse", "HttpRequest", "File", "Task",
                            "Router", "Route", "StringContent", "StreamContent",
                            "JsonContent", "RegexRoute", "HtmlContent", "CancellationTokenSource",
                            "HttpContext", "Stream", "MultipartObject", "Thread", "Task", "Encoding",
                            "HttpKnownHeaderNames", "HttpMethod", "List", "JsonSerializer",
                            "LogStream", "HttpServer", "RotatingLogPolicy", "StringBuilder",
                            "Console", "HttpRequestEventSource", "HttpWebSocket", "X509Certificate2",
                            "AppDomain", "Path", "Directory", "HttpServerConfiguration", "ListeningHost",
                            "ByteArrayContent", "ForwardingResolver", "IPAddress", "IPEndPoint",
                            "HttpServerExecutionResult", "ArgumentNullException", "JsonSerializerOptions",
                            "DbContext"
                        ];
                        const tokenValues = [
                            "RouteMethod", "Guid", "RequestHandlerExecutionMode", "HttpStatusCode",
                            "HttpStatusInformation", "DateTime", "TimeSpan", "RouterMethod",
                            "ListeningPort"
                        ];
                        const tokenInterfaces = [
                            "IRequestHandler", "IEnumerable", "ICollection", "IList"
                        ];
                        
                        function runStyles(node) {
                            if (node.nodeType === 3) {
                                applyStyles(node);
                                
                            } else if (node.nodeType === 1) {
                                
                                const prohibitedClasses = ["hljs-comment", "hljs-string"];
                                
                                if (! prohibitedClasses.some(cls => node.classList.contains(cls))) {
                                    for(const child of node.childNodes) {
                                        runStyles(child);
                                    }
                                }
                            }
                        }
                        
                        function applyStyles(textNode) {
                            const text = textNode.textContent;
                            const fragment = [];
                            
                            for (const token of splitText(text, [...tokenClasses, ...tokenValues, ...tokenInterfaces])) {
                                if (tokenClasses.includes(token)) {
                                    fragment.push(el("span.hljs-meta", token));
                                    
                                } else if (tokenValues.includes(token)) {
                                    fragment.push(el("span.hljs-meta-value", token));
                                    
                                } else if (tokenInterfaces.includes(token)) {
                                    fragment.push(el("span.hljs-meta-interface", token));
                                    
                                } else {
                                    fragment.push(token);
                                }
                            }
                            
                            textNode.replaceWith(el.fragment(...fragment));
                        }
                        
                        const code = pre.querySelector("code");
                        if (code && (code.classList.contains("lang-csharp") || code.classList.contains("lang-cs"))) {
                            runStyles(code);
                        }
                    }
                    
                    function addLineNumbers(pre) {
                        const code = pre.querySelector("code");
                        if (!code) return;
                        
                        var lines = (code.textContent.match(/\n/g) || []).length;
                        
                        if (lines <= 1) {
                            return;
                        }
                        
                        const lineElements = [];
                        for (let i = 1; i <= lines; i++) {
                            lineElements.push(el("span.hljs-line-number", i + "\n"));
                        }
                        
                        code.prepend(el("div.line-numbers", ...lineElements));
                        code.classList.add("has-line-numbers");
                    }
                                        
                    document.querySelectorAll("pre").forEach(pre => {
                        highlightMissingCodeTokens(pre);
                        addLineNumbers(pre);
                    });
                }
                
                runPostHljsFunctions();
            </script>
        </footer>
    </body>
</html>